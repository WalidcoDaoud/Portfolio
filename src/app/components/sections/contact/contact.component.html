<section class="contact-section" id="contact">
  <div class="contact-container">
    <div class="contact-header">
      <h2 class="title">Get In Touch</h2>
      <div class="line"></div>
      <p class="contact-text">
        Have a question or want to work together? Feel free to contact me!
      </p>
    </div>

    <div class="contact-content">
      <div class="contact-info">
        <div class="info-card">
          <h3>Contact Info</h3>

          <div class="info-items">
            <div class="info-item">
              <div class="icon-circle">
                <i class="bi bi-envelope icon"></i>
              </div>
              <div class="info-text">
                <p>Email</p>
                <a
                  href="mailto:walidkd208&#64;gmail.com?subject=Portfolio%20Contact&body=Hi%20Walid,"
                  >walidkd208&#64;gmail.com</a
                >
              </div>
            </div>
            <div class="info-item">
              <div class="icon-circle">
                <i class="bi bi-telephone icon"></i>
              </div>
              <div class="info-text">
                <p>Phone</p>
                <a href="tel:+5511988451813">+55 11 98845-1813</a>
              </div>
            </div>
            <div class="info-item">
              <div class="icon-circle">
                <i class="bi bi-geo-alt icon"></i>
              </div>
              <div class="info-text">
                <p>Location</p>
                <p class="text">SÃ£o Paulo, Brazil</p>
              </div>
            </div>
          </div>

          <div class="social-section">
            <h4>Follow Me</h4>
            <div class="social-icons">
              <a
                class="linkedin"
                href="https://www.linkedin.com/in/walid-daoud-293564211/"
                target="_blank"
                rel="noopener noreferrer"
              >
                <i class="bi bi-linkedin icon"></i>
              </a>
              <a
                class="github"
                href="https://github.com/WalidcoDaoud"
                target="_blank"
                rel="noopener noreferrer"
              >
                <i class="bi bi-github icon"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="contact-form">
        <form [formGroup]="emailForm" (ngSubmit)="sendEmail()" *ngIf="emailForm">
          <h3>Send me a message</h3>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" placeholder="Your name" />
            <mat-error
              class="error"
              *ngIf="
                emailForm.get('name')?.invalid &&
                (emailForm.get('name')?.touched || emailForm.get('name')?.dirty)
              "
            >
              <div *ngIf="emailForm.get('name')?.errors?.['required']">
                Name is required
              </div>
              <div *ngIf="emailForm.get('name')?.errors?.['minlength']">
                Minimum 2 characters required
              </div>
              <div *ngIf="emailForm.get('name')?.errors?.['maxlength']">
                Maximum 50 characters allowed
              </div>
              <div *ngIf="emailForm.get('name')?.errors?.['pattern']">
                Only letters and spaces allowed
              </div>
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Email</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="your.email@example.com"
            />
            <mat-error
              class="error"
              *ngIf="
                emailForm.get('email')?.invalid &&
                (emailForm.get('email')?.touched ||
                  emailForm.get('email')?.dirty)
              "
            >
              <div *ngIf="emailForm.get('email')?.errors?.['required']">
                Email is required
              </div>
              <div *ngIf="emailForm.get('email')?.errors?.['email']">
                Please enter a valid email address
              </div>
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Subject</mat-label>
            <input
              matInput
              formControlName="subject"
              placeholder="Message subject"
            />
            <mat-error
              class="error"
              *ngIf="
                emailForm.get('subject')?.invalid &&
                (emailForm.get('subject')?.touched ||
                  emailForm.get('subject')?.dirty)
              "
            >
              <div *ngIf="emailForm.get('subject')?.errors?.['required']">
                Subject is required
              </div>
              <div *ngIf="emailForm.get('subject')?.errors?.['minlength']">
                Minimum 5 characters required
              </div>
              <div *ngIf="emailForm.get('subject')?.errors?.['maxlength']">
                Maximum 100 characters allowed
              </div>
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Message</mat-label>
            <textarea
              matInput
              formControlName="message"
              placeholder="Your message here..."
              rows="5"
            ></textarea>
            <mat-error
              class="error"
              *ngIf="
                emailForm.get('message')?.invalid &&
                (emailForm.get('message')?.touched ||
                  emailForm.get('message')?.dirty)
              "
            >
              <div *ngIf="emailForm.get('message')?.errors?.['required']">
                Message is required
              </div>
              <div *ngIf="emailForm.get('message')?.errors?.['minlength']">
                Minimum 10 characters required
              </div>
              <div *ngIf="emailForm.get('message')?.errors?.['maxlength']">
                Maximum 500 characters allowed
              </div>
            </mat-error>
          </mat-form-field>

          <button
            #submitButton
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="emailForm.invalid || isSending || isSubmitted"
          >
            <span *ngIf="!isSending && !isSent">Send Message</span>
            <span *ngIf="isSending">
              <mat-spinner diameter="20" color="accent"></mat-spinner>
            </span>
            <span *ngIf="isSent && !isSending">Message Sent!</span>
          </button>
        </form>
      </div>
    </div>
  </div>
</section>
